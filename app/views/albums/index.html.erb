<div class="box">
  <table class="table is-striped is-hoverable is-sortable is-fullwidth">
    <%= link_to 'Crear Album', new_album_path, class: "button is-primary is-hoverable mr-2 mb-2" %>
    <thead>
      <tr>
        <th class="title is-5">Titulo</th>
        <th class="title is-5">Fecha</th>
        <th class="title is-5">Contrase√±a</th>
        <th class="title is-5">Portada</th>
        <th class="title is-5">Imagenes</th>
        <th colspan="2"></th>
      </tr>
    </thead>
    
    <tbody>
      <% @albums.each do |album| %>
      <tr>
        <td> <%= album.title %></td>
        <td> <%= album.date_event %></td>
        <td class="has-text-centered"> <%= album.password%> </td>
        <td>
          <% if album.galleries.present? && album.galleries.first.images.attached? %>
          <%= image_tag url_for( album.galleries.first.images.first), data: {src: "#{rails_blob_url(album.galleries.first.images.first)}"},width: '50' %>
          <% end %>
        </td>
        <td class="has-text-centered"> 
          <% count = 0%>
          <% album.galleries.each {|gal| count += gal.images.length } %>
          <%= count %> 
        </td>
        <td></td>
        <td class="has-text-right is-centered is-vcentered">
          <%= link_to svg('ico-eye.svg'), album, class: 'icon' %> |
          <%= link_to svg('ico-edit.svg'), edit_album_path(album), class: 'icon' %> |
          <%= link_to svg('ico-trash.svg'), album, method: :delete, data: { confirm: 'Are you sure?' }, class: 'icon' %>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
  <%== pagy_bulma_nav(@pagy) if @pagy.present? %>
</div>